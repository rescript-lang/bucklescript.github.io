<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>その他 · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="その他 · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/index.html"/><meta property="og:description" content="## Composing `bs` Attributes"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ja"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/ja/installation.html" target="_self">ドキュメント</a></li><li class=""><a href="/docs/ja/playground.html" target="_self">試してみる</a></li><li class="siteNavGroupActive"><a href="/docs/ja/stdlib-overview.html" target="_self">API</a></li><li class=""><a href="/docs/ja/community.html" target="_self">コミュニティ</a></li><li class=""><a href="/blog" target="_self">ブログ</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg"/>日本語</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/en">English</a></li><li><a href="/es-ES">Español</a></li><li><a href="/fr">Français</a></li><li><a href="/ko">한국어</a></li><li><a href="/pt-BR">Português (Brasil)</a></li><li><a href="/ru">Русский</a></li><li><a href="/zh-CN">中文</a></li><li><a href="/zh-TW">繁體中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">翻訳に参加する</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>相互運用</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>はじめに</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ja/what-why.html">What &amp; Why</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/installation.html">インストール</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/new-project.html">新しいプロジェクト</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/concepts-overview.html">基本コンセプト</a></li></ul></div><div class="navGroup navGroupActive"><h3>相互運用</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ja/interop-overview.html">概要</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/interop-cheatsheet.html">チートシート</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/embed-raw-javascript.html">生の JavaScript を埋め込む</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/common-data-types.html">基本的なデータ型</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/intro-to-external.html">Intro to External</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/bind-to-global-values.html">グローバル変数のバインド</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/null-undefined-option.html">Null、Undefined、オプション</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/object.html">オブジェクト</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/object-deprecated.html">Object (Deprecated)</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/class.html">クラス</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/function.html">関数</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/import-export.html">インポート / エクスポート</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/regular-expression.html">正規表現</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/exceptions.html">例外</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/json.html">JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/fast-pipe.html">Fast Pipe</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/generate-converters-accessors.html">コンバーターとヘルパーの生成</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/better-data-structures-printing-debug-mode.html">Better Data Structures Printing (Debug Mode)</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/nodejs-special-variables.html">NodeJS の特殊な変数</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/ja/interop-misc.html">その他</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/browser-support-polyfills.html">ブラウザー対応と Polyfill</a></li></ul></div><div class="navGroup navGroupActive"><h3>ビルドシステム</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ja/build-overview.html">概要</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/build-configuration.html">設定</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/automatic-interface-generation.html">インターフェースの自動生成</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/interop-with-js-build-systems.html">JavaScript ビルド システムとの相互運用</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/build-performance.html">パフォーマンス</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/build-advanced.html">高度な設定</a></li></ul></div><div class="navGroup navGroupActive"><h3>標準ライブラリ</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ja/stdlib-overview.html">概要</a></li></ul></div><div class="navGroup navGroupActive"><h3>高度な設定</h3><ul><li class="navListItem"><a class="navItem" href="/docs/ja/conditional-compilation.html">条件付きコンパイル</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/extended-compiler-options.html">拡張コンパイラ オプション</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/use-existing-ocaml-libraries.html">既存のOCamlのライブラリを使う</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/difference-from-native-ocaml.html">ネイティブ OCaml との違い</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/compiler-architecture-principles.html">コンパイラのアーキテクチャと原則</a></li><li class="navListItem"><a class="navItem" href="/docs/ja/comparison-to-jsoo.html">Js_of_ocaml との比較</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bucklescript/ja" target="_blank" rel="noreferrer noopener">Translate</a><h1>その他</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="composing-bs-attributes"></a><a href="#composing-bs-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Composing <code>bs</code> Attributes</h2>
<p>As you might have guessed, most <code>bs.*</code> attributes can be used together. Here's an extreme example:</p>
<pre><code class="hljs css ocaml"><span class="hljs-keyword">external</span> draw: (_ [@bs.<span class="hljs-keyword">as</span> <span class="hljs-string">"dog"</span>]) -&gt; <span class="hljs-built_in">int</span> <span class="hljs-built_in">array</span> -&gt; <span class="hljs-built_in">unit</span> = <span class="hljs-string">"draw"</span> [@@bs.<span class="hljs-keyword">val</span>] [@@bs.scope <span class="hljs-string">"global"</span>] [@@bs.splice]

<span class="hljs-keyword">let</span> _ = draw [|<span class="hljs-number">1</span>;<span class="hljs-number">2</span>|]
</code></pre>
<pre><code class="hljs css reason">[@bs.val] [@bs.scope <span class="hljs-string">"global"</span>] [@bs.splice]
external draw : <span class="hljs-function"><span class="hljs-params">([@bs.<span class="hljs-keyword">as</span> <span class="hljs-string">"dog"</span>] _, array(int))</span> =&gt;</span> unit = <span class="hljs-string">"draw"</span>;

draw([|<span class="hljs-number">1</span>, <span class="hljs-number">2</span>|]);
</code></pre>
<p>Output:</p>
<pre><code class="hljs css js">global.draw(<span class="hljs-string">"dog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="safe-external-data-handling"></a><a href="#safe-external-data-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Safe External Data Handling</h2>
<p>In some cases, the data could either come from JS or BS; it's very hard to give precise type information because of this. For example, for an external promise whose creation could come from the JS API, its failed value caused by <code>Promise.reject</code> could be of any shape.</p>
<p>BuckleScript provides a solution, <code>bs.open</code>, to filter out OCaml structured exception data from the mixed data source. It preserves type safety while allowing you to deal with mixed source. It makes use of OCaml’s extensible variant, so that users can mix values of type <code>exn</code> with JS data.</p>
<pre><code class="hljs css ocaml"><span class="hljs-keyword">let</span> handleData = <span class="hljs-keyword">function</span> [@bs.<span class="hljs-keyword">open</span>]
 | <span class="hljs-type">Invalid_argument</span> _ -&gt; <span class="hljs-number">0</span>
 | <span class="hljs-type">Not_found</span> -&gt; <span class="hljs-number">1</span>
 | <span class="hljs-type">Sys_error</span> _ -&gt; <span class="hljs-number">2</span>

<span class="hljs-comment">(* val handleData : 'a -&gt; int option *)</span>
</code></pre>
<pre><code class="hljs css reason"><span class="hljs-keyword">let</span> handleData = [@bs.open] (
  <span class="hljs-keyword">fun</span>
  | <span class="hljs-type">Invalid_argument</span>(<span class="hljs-keyword">_</span>) =&gt; <span class="hljs-number">0</span>
  | <span class="hljs-type">Not_found</span> =&gt; <span class="hljs-number">1</span>
  | <span class="hljs-type">Sys_error</span>(<span class="hljs-keyword">_</span>) =&gt; <span class="hljs-number">2</span>
);

<span class="hljs-comment">(* let handleData: 'a =&gt; option(int) *)</span>
</code></pre>
<p>For any input source, as long as it matches the exception pattern (nested pattern match supported), the matched value is returned, otherwise return <code>None</code>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="nodejs-special-variables.html">← NodeJS の特殊な変数</a><a class="docs-next button" href="browser-support-polyfills.html">ブラウザー対応と Polyfill →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#composing-bs-attributes">Composing <code>bs</code> Attributes</a></li><li><a href="#safe-external-data-handling">Safe External Data Handling</a></li></ul></nav></div><span><script src="/js/redirectBlog.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:ja"]}
              });
            </script></body></html>