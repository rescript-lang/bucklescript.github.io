<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Interop with JS Build System · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Interop with JS Build System · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/index.html"/><meta property="og:description" content="If you come from JS, chances are that you already have a build system in your existing project. Here&#x27;s an overview of the role bsb would play in your build pipeline, if you want to introduce some BS code into the codebase."/><link rel="shortcut icon" href="/img/logos/bucklescript_small.svg"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logos/bucklescript_small.svg"/><h2 class="headerTitle">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/zh-TW/installation.html" target="_self">Docs</a></li><li><a href="/docs/zh-TW/playground.html" target="_self">Try</a></li><li><a href="/docs/zh-TW/community.html" target="_self">Community</a></li><li><a href="/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg"/>繁體中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/ja">日本語</a></li><li><a href="/en">English</a></li><li><a href="/es-ES">Español</a></li><li><a href="/fr">Français</a></li><li><a href="/ko">한국어</a></li><li><a href="/pt-BR">Português (Brasil)</a></li><li><a href="/ru">Русский</a></li><li><a href="/zh-CN">中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Build System</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Intro</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/what-why.html">What &amp; Why</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/new-project.html">New Project</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/concepts-overview.html">Concepts Overview</a></li></ul></div><div class="navGroup navGroupActive"><h3>Interop</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-cheatsheet.html">Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/embed-raw-javascript.html">Embed Raw JavaScript</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/common-data-types.html">Common Data Types</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/intro-to-external.html">Intro to External</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/boolean.html">Boolean</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/bind-to-global-values.html">Bind to Global Values</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/null-undefined-option.html">Null, Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/class.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/function.html">Function</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/import-export.html">Import &amp; Export</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/regular-expression.html">Regular Expression</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/exceptions.html">Exceptions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/json.html">JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/generate-converters-accessors.html">Generate Converters &amp; Helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/nodejs-special-variables.html">NodeJS Special Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-misc.html">Miscellaneous</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/typescript-support.html">TypeScript Support</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/browser-support-polyfills.html">Browser Support &amp; Polyfills</a></li></ul></div><div class="navGroup navGroupActive"><h3>Build System</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-configuration.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/automatic-interface-generation.html">Automatic Interface Generation</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/zh-TW/interop-with-js-build-systems.html">Interop with JS Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-performance.html">Performance</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-advanced.html">Advanced</a></li></ul></div><div class="navGroup navGroupActive"><h3>Standard Library</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/stdlib-overview.html">Overview</a></li></ul></div><div class="navGroup navGroupActive"><h3>Advanced</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-TW/conditional-compilation.html">Conditional Compilation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/extended-compiler-options.html">Extended Compiler Options</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/use-existing-ocaml-libraries.html">Use Existing OCaml Libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/difference-from-native-ocaml.html">Difference from Native OCaml</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/compiler-architecture-principles.html">Compiler Architecture &amp; Principles</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/comparison-to-jsoo.html">Comparison to Js_of_ocaml</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bucklescript/zh-TW" target="_blank">Translate</a><h1>Interop with JS Build System</h1></header><article><div><span><p>If you come from JS, chances are that you already have a build system in your existing project. Here's an overview of the role bsb would play in your build pipeline, if you want to introduce some BS code into the codebase.</p>
<h2><a class="anchor" aria-hidden="true" name="popular-js-build-systems"></a><a href="#popular-js-build-systems" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Popular JS Build Systems</h2>
<p>The JS ecosystem uses a few build systems: <a href="http://browserify.org/">browserify</a>, <a href="https://github.com/rollup/rollup">rollup</a>, <a href="https://webpack.js.org/">webpack</a>, etc. The latter's probably the most popular of the three (as of December 2017 =P). These build systems do both the compilation and the linking (aka, bundling many files into one or few files).</p>
<p>BuckleScript and bsb only take care of the compilation step; it maps one ml/re/mli/rei file into one JS output file. As such, in theory, no build system integration is needed from our side. From e.g. the webpack watcher's perspective, the JS files BuckleScript generates are almost equivalent to your hand-written JS files. We also recommend that you initially check in those BS-generated JS files, as this workflow means:</p>
<ul>
<li>You can introduce BuckleScript and/or Reason silently into your codebase without disturbing existing build infra.</li>
<li>You have a visual diff of the performance &amp; correctness of your JS file when you update the ml/re files and the JS artifacts change.</li>
<li>You can let teammates hot-patch the JS files in emergency situations, without needing to first start learning BS/Reason.</li>
<li>You can remove BuckleScript and Reason completely from your codebase and things will still work (in case your company decides to stop using us for whatever reason).</li>
</ul>
<p>The slight disavantage of such approach is that you need to keep both a bsb watcher and a webpack watcher open. Though if you activate <a href="https://github.com/reasonml-editor/vscode-reasonml#bsb">VSCode-Reasonml's bsb feature</a>, you avoid the former rather seamlessly.</p>
<p>For what it's worth, you can also turn bsb into an automated step in your build pipeline (e.g. into a webpack loader, like our <a href="https://github.com/reasonml-community/bs-loader">deprecated bs-loader here</a>).</p>
<h3><a class="anchor" aria-hidden="true" name="tips-tricks"></a><a href="#tips-tricks" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips &amp; Tricks</h3>
<p>You can make BS JS files look even more idiomatic through the in-source + bs suffix config in <code>bsconfig.json</code>:</p>
<pre><code class="hljs css json">{
  "package-specs": {
    "module": "commonjs", // or whatever module system your project uses
    "in-source": true
  },
  "suffix": ".bs.js"
}
</code></pre>
<p>This will:</p>
<ul>
<li>Generate the JS files alongside your BS source files.</li>
<li>Use the file extension <code>.bs.js</code>, so that you can require these files on the JS side through <code>require('./MyFile.bs')</code>, without needing a loader.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" name="use-loaders-on-bs-side"></a><a href="#use-loaders-on-bs-side" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use Loaders on BS Side</h2>
<p>&quot;What if my build system uses a CSS/png/whatever loader and I'd like to use it in BuckleScript?&quot;</p>
<p>Loaders are indeed troublesome; in the meantime, please use e.g. <code>[%bs.raw {|require('./myStyles.css')|}]</code> at the top of your file. This just uses <a href="/docs/zh-TW/embed-raw-javascript.html"><code>bs.raw</code></a> to compile the snippet into an actual JS require.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="automatic-interface-generation.html">← Automatic Interface Generation</a><a class="docs-next button" href="build-performance.html">Performance →</a></div></div></div></div><span><script src="/js/redirectBlog.js"></script><script src="/js/pjax-api.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react'
              });
            </script></body></html>