<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>A story of exception encoding in BuckleScript · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="We just recently made some significant improvements with our new exception encoding and we find it so exciting that we want to highlight the changes and explain a little bit how exceptions work when compiling to JS."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="A story of exception encoding in BuckleScript · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/blog/2020/05/06/exception-encoding"/><meta property="og:description" content="We just recently made some significant improvements with our new exception encoding and we find it so exciting that we want to highlight the changes and explain a little bit how exceptions work when compiling to JS."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/installation" target="_self">Docs</a></li><li class=""><a href="/docs/en/playground" target="_self">Try</a></li><li class=""><a href="/docs/en/stdlib-overview" target="_self">API</a></li><li class=""><a href="/docs/en/community" target="_self">Community</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/ja">日本語</a></li><li><a href="/es-ES">Español</a></li><li><a href="/fr">Français</a></li><li><a href="/ko">한국어</a></li><li><a href="/pt-BR">Português (Brasil)</a></li><li><a href="/ru">Русский</a></li><li><a href="/zh-CN">中文</a></li><li><a href="/zh-TW">繁體中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2020/05/06/exception-encoding">A story of exception encoding in BuckleScript</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/04/13/release-7-3">What&#x27;s new in release 7.3</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/26/generalize-uncurry">Generalized uncurry support in BuckleScript 7.3</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/12/release-7-2">Announcing bs-platform  7.2</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/20/loading-stdlib-in-memory">Loading stdlib from memory</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2020/05/06/exception-encoding">A story of exception encoding in BuckleScript</a></h1><p class="post-meta">May 6, 2020</p><div class="authorBlock"></div></header><div><span><p>We just recently made some significant improvements with our new exception encoding and we find it so exciting that we want to highlight the changes and explain a little bit how exceptions work when compiling to JS.</p>
<p>The new encoding allows us to provide proper, clear stacktrace information whenever a Reason/OCaml exception is thrown. This is particularly important when you have some code running in production that needs to collect those stacktrace for diagnostics.</p>
<p>What's the difference?</p>
<pre><code class="hljs css language-reasonml"><span class="hljs-keyword">exception</span> My_exception { x : <span class="hljs-built_in">int</span>};

<span class="hljs-keyword">let</span> loop =<span class="hljs-function"> <span class="hljs-params">()</span> =&gt;</span> {
 for (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> <span class="hljs-keyword">to</span> <span class="hljs-number">100</span>) {
   <span class="hljs-keyword">if</span> (i<span class="hljs-operator"> == </span><span class="hljs-number">10</span>) {
     raise (My_exception { x : i})
   };
 };
};
loop <span class="hljs-literal">()</span>;
</code></pre>
<p>When we compile and run this piece of code with the old exception encoding, this is what we'd get:</p>
<pre><code class="hljs">exn_demo$node src<span class="hljs-operator">/</span>exn_demo.bs.js 

<span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>exn_demo<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>exn_demo.bs.js:<span class="hljs-number">11</span>
      throw <span class="hljs-literal">[</span>
      <span class="hljs-operator">^</span>
<span class="hljs-literal">[</span> <span class="hljs-literal">[</span> '<span class="hljs-module-identifier">Exn_demo</span>.<span class="hljs-constructor">My_exception</span>', <span class="hljs-number">1</span>, tag: <span class="hljs-number">248</span> <span class="hljs-literal">]</span>, <span class="hljs-number">10</span> <span class="hljs-literal">]</span>
</code></pre>
<p>With our new improvements, we now get way better results:</p>
<pre><code class="hljs">bucklescript$node jscomp<span class="hljs-regexp">/test/</span>exn_demo.js

<span class="hljs-regexp">/Users/</span>hongbozhang<span class="hljs-regexp">/git/</span>bucklescript<span class="hljs-regexp">/jscomp/</span>test/exn_demo.<span class="hljs-string">js:</span><span class="hljs-number">10</span>
      <span class="hljs-keyword">throw</span> {
      ^
{
<span class="hljs-symbol">  RE_EXN_ID:</span> <span class="hljs-string">'Exn_demo.My_exception/1'</span>,
<span class="hljs-symbol">  x:</span> <span class="hljs-number">10</span>,
<span class="hljs-symbol">  Error:</span> Error
      at loop (<span class="hljs-regexp">/Users/</span>hongbozhang<span class="hljs-regexp">/git/</span>bucklescript<span class="hljs-regexp">/jscomp/</span>test/exn_demo.<span class="hljs-string">js:</span><span class="hljs-number">13</span>:<span class="hljs-number">20</span>)
      at Object.&lt;anonymous&gt; (<span class="hljs-regexp">/Users/</span>hongbozhang<span class="hljs-regexp">/git/</span>bucklescript<span class="hljs-regexp">/jscomp/</span>test/exn_demo.<span class="hljs-string">js:</span><span class="hljs-number">21</span>:<span class="hljs-number">1</span>)
      at ...
}
</code></pre>
<p>That's basically it! Furthermore in this post, we want to give you some insights on how the data representation of exceptions looks like, and how it has been changed to expose useful stacktraces.</p>
<h2><a class="anchor" aria-hidden="true" id="why-it-is-tricky-to-preserve-stack-traces-in-reasonml-exceptions"></a><a href="#why-it-is-tricky-to-preserve-stack-traces-in-reasonml-exceptions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why it is tricky to preserve stack-traces in ReasonML exceptions</h2>
<p>Whenever you are using a Reason / OCaml exception (a so called &quot;native exception&quot;), you are actually using a data structure which is not the same as a JS runtime exception. That means that each exception representation invokes a different stacktrace handling mechanism:</p>
<p>In JS, the stacktrace is collected immediately when an Error object is created / thrown, while in native Reason / OCaml, such data is not attached to the exception object at all (you can't just access <code>e.stack</code> to retrieve the stacktrace). This is because collecting the stacktrace in a native environment highly depends on the runtime support (e.g. if a flag was provided to attach the stacktrace data).</p>
<p>Our goal was to provide a way to get the same stacktrace for native exceptions as you would with JS exceptions. This is all part of our on-going work to plan and implement the optimal encoding for all the different ReasonML data types for the JS runtime (just like with our previous changes to the <code>bool</code>, <code>unit</code> and <code>records</code> representation as well).</p>
<h2><a class="anchor" aria-hidden="true" id="whats-the-classical-reasonml-exception-encoding"></a><a href="#whats-the-classical-reasonml-exception-encoding" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What's the classical ReasonML exception encoding?</h2>
<p>In ReasonML, an exception is basically structured data. Let's have a look at the two exception definitions below:</p>
<pre><code class="hljs css language-reasonml"><span class="hljs-keyword">exception</span> A <span class="hljs-keyword">of</span> { x : <span class="hljs-built_in">int</span> , y : <span class="hljs-built_in">string</span>}
<span class="hljs-keyword">exception</span> B
</code></pre>
<p><code>exception A</code> is encoded as an array of 3 slots. The first slot is a block by itself (called an <em>identity block</em>), while the second slot is for field x and the third slot for field y.</p>
<p><code>exception B</code> is just the identity block.</p>
<p>The identity block is an array of 2 slots. The first slot is a string like &quot;B&quot;, while the second slot is a unique integer.
In more detail, the native array will also have a magic tag 248 attached which is not relevant for our purposes though.</p>
<h2><a class="anchor" aria-hidden="true" id="whats-the-new-exception-encoding"></a><a href="#whats-the-new-exception-encoding" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What's the new exception encoding?</h2>
<p>We had to simplify and unify the encoding for the different exception cases to make it possible to compile exceptions into an object instead of an array. Let's take a look at the two exception values below for example:</p>
<pre><code class="hljs css language-reasonml">A ({ x : <span class="hljs-number">1</span>, y : <span class="hljs-string">"x"</span>}
B
</code></pre>
<p>The two values will be compiled into</p>
<pre><code class="hljs css language-js">{<span class="hljs-attr">RE_EXN_ID</span> : <span class="hljs-string">"A/uuid"</span>, <span class="hljs-attr">x</span> : <span class="hljs-number">1</span>, <span class="hljs-attr">y</span> : <span class="hljs-string">"x"</span> }
{<span class="hljs-attr">RE_EXN_ID</span> : <span class="hljs-string">"B/uuid"</span>}
</code></pre>
<p>As you can see, all exceptions (no matter with or without payload) share the same encoding.</p>
<p>What will happen when you raise an exception?</p>
<pre><code class="hljs css language-reasonml">raise (A {x : <span class="hljs-number">1</span> , y : <span class="hljs-string">"x"</span>})
</code></pre>
<p>It generates following JS:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">throw</span> {<span class="hljs-attr">RE_EXN_ID</span>: <span class="hljs-string">"A/uuid"</span>, <span class="hljs-attr">x</span> : <span class="hljs-number">1</span> , <span class="hljs-attr">y</span> : <span class="hljs-string">"x"</span>, <span class="hljs-attr">Error</span> : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span> ()}
</code></pre>
<p>The output above shows that we are now able to attach the stacktrace as an <code>Error</code> attribute very easily, since every exception is now an object instead of an array. Really cool!</p>
<p>It's important to note that a stacktrace will only be attached <em>when you raise an exception</em>. In other words, the stacktrace will not be attached just by creating an exception (which is different to JS'es <code>new Error()</code> behavior).</p>
<h2><a class="anchor" aria-hidden="true" id="what-does-that-mean-for-js-interop"></a><a href="#what-does-that-mean-for-js-interop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What does that mean for JS interop?</h2>
<p>Note that in the JS world, users can pretty much throw any value they want. It is even totally valid to <code>throw undefined</code>. In ReasonML, when you try to catch an exception, the compiler will convert any arbitrary value to a ReasonML exception behind the scene:</p>
<ul>
<li>If it is already a ReasonML exception, then the conversion will be a no-op (no runtime cost</li>
<li>Otherwise it will be wrapped as a <code>Js.Exn.Error obj</code></li>
</ul>
<p>Here is an example on how you'd access the exception value within a Reason <code>try</code> expression:</p>
<pre><code class="hljs css language-reasonml"><span class="hljs-keyword">try</span> (some<span class="hljs-constructor">JSFunctionThrowing()</span>) {
<span class="hljs-pattern-match">| <span class="hljs-constructor">Not_found</span> =&gt;</span> ..  <span class="hljs-comment">// catch  reasonml exception 1 </span>
<span class="hljs-pattern-match">| <span class="hljs-constructor">Invalid_argument</span> =&gt;</span>  <span class="hljs-comment">// catch  reasonml exception 2</span>
<span class="hljs-pattern-match">| <span class="hljs-constructor">Js</span>.<span class="hljs-constructor">Exn</span>.<span class="hljs-constructor">Error</span> (obj) =&gt;</span><span class="hljs-operator"> ... </span><span class="hljs-comment">// catch js exception</span>
}
</code></pre>
<p>The <code>obj</code> value in the <code>Js.Exn.Error</code> branch is an opaque type to maintain type soundness, so if you need to interact with this value, you need to classify it into a concrete type first.</p>
<h2><a class="anchor" aria-hidden="true" id="caveat"></a><a href="#caveat" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveat</h2>
<ul>
<li><p>Please note that it's not allowed to rely on the key name of <code>RE_EXN_ID</code>. It's an implementation detail which will probably be changed into a symbol in the future.</p></li>
<li><p>Don't over-use exeptions, remember exception should only be used in exceptional cases like division by zero. Whenever you  try to express erroneous results, use the <code>result</code> or <code>option</code> type instead.</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="bonus"></a><a href="#bonus" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bonus</h2>
<p>Now with our new exception encoding in place, a hidden feature called <a href="https://caml.inria.fr/pub/docs/manual-ocaml/extensiblevariants.html">extensible variant</a> suddenly got way more interesting as well. Practically speaking, native exceptions are actually a special form of an extensible variant, so both are benefiting from the same representation changes!</p>
<p>Happy hacking and we would like your feedback!</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#why-it-is-tricky-to-preserve-stack-traces-in-reasonml-exceptions">Why it is tricky to preserve stack-traces in ReasonML exceptions</a></li><li><a href="#whats-the-classical-reasonml-exception-encoding">What's the classical ReasonML exception encoding?</a></li><li><a href="#whats-the-new-exception-encoding">What's the new exception encoding?</a></li><li><a href="#what-does-that-mean-for-js-interop">What does that mean for JS interop?</a></li><li><a href="#caveat">Caveat</a></li><li><a href="#bonus">Bonus</a></li></ul></nav></div><span><script src="/js/redirectBlog.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:en"]}
              });
            </script></body></html>